Bootstrap: localimage
From: sparsity-base.sif

%files
    requirements.txt

%post
    apt install -y python3.10-venv
    apt install -y python3-dev
    apt install -y libc++-15-dev libc++abi-15-dev cuda
    python3 -m venv /opt/venv
    . /opt/venv/bin/activate
    python3 -m pip install -U pip

    cat requirements.txt

    python3 -m pip install -r requirements.txt
    python3 -m pip install -U multiprocess

%runscript
    . /opt/venv/bin/activate
    $@
